<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Portfolio of Jogi Bala Venkata Aravind, a full-stack developer specializing in web development, IoT, and quality assurance.">
  <meta name="keywords" content="portfolio, web developer, IoT, ESP32, job portal, Hyderabad, UI/UX">
  <meta name="author" content="Jogi Bala Venkata Aravind">
  <title>Jogi Bala Venkata Aravind - Portfolio</title>
  <script src="https://cdn.tailwindcss.com" integrity="sha384-..."></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js" integrity="sha384-..."></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js" integrity="sha384-..."></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.min.js" integrity="sha384-..."></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js" integrity="sha384-..."></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js" integrity="sha384-..."></script>
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/highlight.min.js" integrity="sha384-..."></script>
  <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js" integrity="sha384-..."></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" integrity="sha384-...">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha384-...">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/atom-one-dark.min.css" integrity="sha384-...">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: #3b82f6;
      --secondary-color: #a855f7;
      --accent-color: #f472b6;
      --bg-color: #f9fafb;
      --text-color: #1e293b;
      --card-bg: rgba(255, 255, 255, 0.1);
      --glass-bg: rgba(255, 255, 255, 0.2);
      --blur: blur(10px);
      --shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
      --success-color: #10b981;
      --error-color: #ef4444;
    }
    .dark {
      --bg-color: #0f172a;
      --text-color: #e2e8f0;
      --card-bg: rgba(30, 41, 59, 0.3);
      --glass-bg: rgba(30, 41, 59, 0.4);
    }
    .high-contrast {
      --bg-color: #000;
      --text-color: #fff;
      --primary-color: #00f;
      --secondary-color: #f00;
      --card-bg: rgba(255, 255, 255, 0.9);
      --glass-bg: rgba(255, 255, 255, 0.9);
      --success-color: #00ff00;
      --error-color: #ff0000;
    }
    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg-color);
      color: var(--text-color);
      transition: all 0.3s ease;
      overflow-x: hidden;
      scroll-behavior: smooth;
      line-height: 1.6;
    }
    .glassmorphic {
      background: var(--glass-bg);
      backdrop-filter: var(--blur);
      -webkit-backdrop-filter: var(--blur);
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: var(--shadow);
      border-radius: 16px;
      transition: all 0.3s ease, transform 0.3s ease;
      transform-style: preserve-3d;
    }
    .glassmorphic:not(.no-hover):hover {
      transform: translateY(-4px) scale(1.02);
      box-shadow: 0 8px 40px rgba(0, 0, 0, 0.2);
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: #fff;
    }
    .btn-primary {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: #fff;
      padding: 0.75rem 1.5rem;
      border-radius: 12px;
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
      z-index: 1;
      font-weight: 500;
    }
    .btn-primary:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
    }
    .btn-primary:focus {
      outline: 2px solid var(--accent-color);
      outline-offset: 2px;
    }
    .btn-primary::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.5s ease, height 0.5s ease;
      z-index: -1;
    }
    .btn-primary:hover::before {
      width: 300px;
      height: 300px;
    }
    .section {
      opacity: 0;
      transform: translateY(50px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    .section.active {
      opacity: 1;
      transform: translateY(0);
    }
    .hero-bg {
      position: relative;
      overflow: hidden;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    }
    .hero-bg::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.2), transparent);
      animation: pulse-bg 15s ease infinite;
      z-index: -1;
    }
    @keyframes pulse-bg {
      0%, 100% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.2); opacity: 0.3; }
    }
    .spinner {
      width: 50px;
      height: 50px;
      border: 6px solid rgba(255, 255, 255, 0.2);
      border-top: 6px solid var(--primary-color);
      border-radius: 50%;
      animation: spin 1s ease-in-out infinite;
      will-change: transform;
    }
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    @media (prefers-reduced-motion: reduce) {
      .spinner, .circular-progress circle, .profile-img, .canvas-particles, .btn-primary::before, .glassmorphic:hover {
        animation: none !important;
        transition: none !important;
        transform: none !important;
      }
      .btn-primary:focus {
        outline: 2px solid var(--accent-color);
        outline-offset: 2px;
      }
    }
    .parallax {
      background-attachment: fixed;
      background-size: cover;
      background-position: center;
      position: relative;
      z-index: 0;
    }
    .parallax::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), transparent);
      z-index: -1;
    }
    .circular-progress {
      position: relative;
      width: 80px;
      height: 80px;
      transform: rotate(-90deg);
      will-change: transform;
    }
    .circular-progress svg {
      width: 100%;
      height: 100%;
    }
    .circular-progress circle {
      fill: none;
      stroke-width: 8;
      stroke-linecap: round;
    }
    .circular-progress .bg {
      stroke: rgba(0, 0, 0, 0.1);
    }
    .circular-progress .progress {
      stroke: var(--primary-color);
      transition: stroke-dashoffset 1.5s ease-in-out;
    }
    .circular-progress .text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(90deg);
      font-size: 16px;
      font-weight: 600;
      color: var(--text-color);
    }
    .tooltip {
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.3s ease, transform 0.3s ease;
      transform: translateY(10px);
      background: var(--card-bg);
      color: var(--text-color);
      padding: 0.5rem 1rem;
      border-radius: 8px;
      font-size: 0.85rem;
    }
    .progress-container:hover .tooltip {
      visibility: visible;
      opacity: 1;
      transform: translateY(0);
    }
    .flip-card {
      perspective: 1000px;
    }
    .flip-card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s ease-in-out;
      transform-style: preserve-3d;
    }
    .flip-card:hover .flip-card-inner {
      transform: rotateY(180deg);
    }
    .flip-card-front, .flip-card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 16px;
    }
    .flip-card-back {
      transform: rotateY(180deg);
      background: var(--card-bg);
      backdrop-filter: var(--blur);
      padding: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      opacity: 0;
      transform: scale(0.8);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    .modal.active {
      opacity: 1;
      transform: scale(1);
    }
    .modal[aria-hidden="true"] {
      display: none;
    }
    .chat-message {
      max-width: 70%;
      margin: 10px;
      padding: 12px 20px;
      border-radius: 16px;
      position: relative;
      transition: transform 0.4s ease, opacity 0.4s ease;
      opacity: 0;
    }
    .chat-message.sent {
      background: var(--primary-color);
      margin-left: auto;
      transform: translateX(50px);
      animation: slideInRight 0.4s ease forwards;
    }
    .chat-message.received {
      background: var(--secondary-color);
      transform: translateX(-50px);
      animation: slideInLeft 0.4s ease forwards;
    }
    .chat-message.pinned {
      background: rgba(234, 179, 8, 0.3);
    }
    @keyframes slideInRight {
      to { transform: translateX(0); opacity: 1; }
    }
    @keyframes slideInLeft {
      to { transform: translateX(0); opacity: 1; }
    }
    .timeline {
      position: relative;
      padding-left: 2rem;
    }
    .timeline::before {
      content: '';
      position: absolute;
      left: 0.5rem;
      top: 0;
      height: 100%;
      width: 4px;
      background: linear-gradient(var(--primary-color), var(--secondary-color));
      border-radius: 2px;
    }
    .timeline-item {
      position: relative;
      margin-bottom: 1.5rem;
      opacity: 0;
      transform: translateX(-20px);
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    .timeline-item.visible {
      opacity: 1;
      transform: translateX(0);
    }
    .timeline-dot {
      width: 16px;
      height: 16px;
      background: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      left: -28px;
      top: 8px;
      box-shadow: 0 0 10px var(--primary-color);
      animation: pulse 2s infinite ease-in-out;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.3); }
      100% { transform: scale(1); }
    }
    .section-header {
      position: relative;
      display: inline-block;
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
      font-size: 2.5rem;
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      padding-bottom: 0.5rem;
    }
    .section-header::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      animation: glow 3s ease infinite;
    }
    @keyframes glow {
      0%, 100% { box-shadow: 0 0 10px var(--primary-color); }
      50% { box-shadow: 0 0 20px var(--secondary-color); }
    }
    .swiper-slide {
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .toast {
      transition: opacity 0.5s ease, transform 0.5s ease;
      z-index: 3000;
      position: fixed;
      top: 1rem;
      left: 50%;
      transform: translateX(-50%);
      font-family: 'Poppins', sans-serif;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      color: #fff;
    }
    ::-webkit-scrollbar {
      width: 10px;
    }
    ::-webkit-scrollbar-track {
      background: var(--bg-color);
      border-radius: 10px;
    }
    ::-webkit-scrollbar-thumb {
      background: linear-gradient(var(--primary-color), var(--secondary-color));
      border-radius: 10px;
      transition: all 0.3s ease;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(var(--secondary-color), var(--primary-color));
    }
    .star-rating i {
      cursor: pointer;
      transition: transform 0.3s ease, color 0.3s ease;
      color: var(--text-color);
    }
    .star-rating i.filled {
      color: #f59e0b;
    }
    .star-rating i:hover {
      color: #f59e0b;
      transform: scale(1.3);
    }
    .sidebar {
      transform: translateX(-100%);
      transition: transform 0.3s ease;
      width: 64px;
      overflow: hidden;
    }
    .sidebar.open, .sidebar:hover {
      transform: translateX(0);
      width: 256px;
    }
    .sidebar.open .nav-link span, .sidebar:hover .nav-link span {
      display: inline;
    }
    .sidebar .nav-link span {
      display: none;
    }
    .sidebar .nav-link i {
      width: 24px;
      text-align: center;
    }
    @media (min-width: 768px) {
      .sidebar {
        transform: translateX(0);
        width: 64px;
      }
      .sidebar:hover {
        width: 256px;
      }
    }
    .canvas-particles {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }
    .profile-img {
      transition: transform 1.5s ease-in-out;
    }
    .profile-img:hover {
      transform: rotateY(360deg) scale(1.1);
    }
    @media (max-width: 640px) {
      .section-header {
        font-size: 1.75rem;
      }
      .btn-primary {
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
      }
      .glassmorphic {
        padding: 1rem;
      }
      .circular-progress {
        width: 60px;
        height: 60px;
      }
      .circular-progress .text {
        font-size: 12px;
      }
    }
    @media (min-width: 1024px) {
      .section-header {
        font-size: 3rem;
      }
      .glassmorphic {
        padding: 1.5rem;
      }
    }
  </style>
</head>
<body class="min-h-screen relative">
  <!-- Loading Spinner -->
  <div id="loading" class="fixed inset-0 flex items-center justify-center bg-black/70 z-50" aria-hidden="true">
    <div class="spinner" role="status" aria-label="Loading"></div>
  </div>

  <!-- Sidebar Navigation -->
  <nav class="sidebar fixed top-0 left-0 h-full glassmorphic p-4 z-50 transition-all duration-300" id="sidebar" role="navigation" aria-label="Main navigation">
    <div class="flex items-center mb-6">
      <button id="sidebar-toggle" class="md:hidden text-xl" aria-label="Toggle sidebar"><i class="fas fa-bars"></i></button>
      <h1 class="text-lg font-bold ml-4 hidden md:block">Aravind's Portfolio</h1>
    </div>
    <div class="space-y-2" id="nav-links">
      <a href="#home" class="nav-link flex items-center space-x-2 p-2 rounded hover:bg-white/10" data-section="home" aria-label="Home"><i class="fas fa-home"></i><span>Home</span></a>
      <a href="#about" class="nav-link flex items-center space-x-2 p-2 rounded hover:bg-white/10" data-section="about" aria-label="About"><i class="fas fa-user"></i><span>About</span></a>
      <a href="#skills" class="nav-link flex items-center space-x-2 p-2 rounded hover:bg-white/10" data-section="skills" aria-label="Skills"><i class="fas fa-code"></i><span>Skills</span></a>
      <a href="#projects" class="nav-link flex items-center space-x-2 p-2 rounded hover:bg-white/10" data-section="projects" aria-label="Projects"><i class="fas fa-project-diagram"></i><span>Projects</span></a>
      <a href="#jobs" class="nav-link flex items-center space-x-2 p-2 rounded hover:bg-white/10" data-section="jobs" aria-label="Job Portal"><i class="fas fa-briefcase"></i><span>Job Portal</span></a>
      <a href="#gallery" class="nav-link flex items-center space-x-2 p-2 rounded hover:bg-white/10" data-section="gallery" aria-label="Gallery"><i class="fas fa-image"></i><span>Gallery</span></a>
      <a href="#analytics" class="nav-link flex items-center space-x-2 p-2 rounded hover:bg-white/10" data-section="analytics" aria-label="Analytics"><i class="fas fa-chart-line"></i><span>Analytics</span></a>
      <a href="#chat" class="nav-link flex items-center space-x-2 p-2 rounded hover:bg-white/10" data-section="chat" aria-label="Chat"><i class="fas fa-comments"></i><span>Chat</span></a>
      <a href="#iot" class="nav-link flex items-center space-x-2 p-2 rounded hover:bg-white/10" data-section="iot" aria-label="IoT Control"><i class="fas fa-microchip"></i><span>IoT Control</span></a>
      <a href="#testimonials" class="nav-link flex items-center space-x-2 p-2 rounded hover:bg-white/10" data-section="testimonials" aria-label="Testimonials"><i class="fas fa-quote-left"></i><span>Testimonials</span></a>
      <a href="#codesnippets" class="nav-link flex items-center space-x-2 p-2 rounded hover:bg-white/10" data-section="codesnippets" aria-label="Code Snippets"><i class="fas fa-terminal"></i><span>Code Snippets</span></a>
      <a href="#achievements" class="nav-link flex items-center space-x-2 p-2 rounded hover:bg-white/10" data-section="achievements" aria-label="Achievements"><i class="fas fa-trophy"></i><span>Achievements</span></a>
      <a href="#social" class="nav-link flex items-center space-x-2 p-2 rounded hover:bg-white/10" data-section="social" aria-label="Social Feed"><i class="fas fa-share-alt"></i><span>Social Feed</span></a>
      <a href="#ideas" class="nav-link flex items-center space-x-2 p-2 rounded hover:bg-white/10" data-section="ideas" aria-label="Ideas"><i class="fas fa-lightbulb"></i><span>Ideas</span></a>
      <a href="#blog" class="nav-link flex items-center space-x-2 p-2 rounded hover:bg-white/10" data-section="blog" aria-label="Blog"><i class="fas fa-blog"></i><span>Blog</span></a>
      <a href="#newsletter" class="nav-link flex items-center space-x-2 p-2 rounded hover:bg-white/10" data-section="newsletter" aria-label="Newsletter"><i class="fas fa-envelope"></i><span>Newsletter</span></a>
      <a href="#contact" class="nav-link flex items-center space-x-2 p-2 rounded hover:bg-white/10" data-section="contact" aria-label="Contact"><i class="fas fa-phone"></i><span>Contact</span></a>
    </div>
    <div class="absolute bottom-4 flex space-x-2">
      <button id="theme-toggle" class="text-xl" aria-label="Toggle dark theme"><i class="fas fa-moon"></i></button>
      <button id="access-toggle" class="text-xl" aria-label="Toggle high-contrast mode"><i class="fas fa-eye"></i></button>
      <button id="voice-control" class="text-xl" aria-label="Enable voice control"><i class="fas fa-microphone"></i></button>
    </div>
  </nav>

  <!-- Back to Top Button -->
  <button id="back-to-top" class="fixed bottom-4 right-4 glassmorphic rounded-full p-3 hidden" aria-label="Scroll to top">
    <i class="fas fa-arrow-up"></i>
  </button>

  <!-- Project Modal -->
  <div id="project-modal" class="modal" role="dialog" aria-labelledby="modal-title" aria-hidden="true">
    <div class="glassmorphic p-8 max-w-lg w-full">
      <button onclick="Portfolio.closeProjectModal()" class="absolute top-4 right-4 text-white text-2xl hover:text-gray-300" aria-label="Close project modal">×</button>
      <h3 id="modal-title" class="text-2xl font-semibold"></h3>
      <p id="modal-description" class="mt-4"></p>
      <p id="modal-tech" class="mt-2"><strong>Tech Stack:</strong></p>
      <p id="modal-duration" class="mt-2"><strong>Duration:</strong></p>
      <a id="modal-link" href="#" class="btn-primary mt-4 block text-center" target="_blank" rel="noopener">Live Demo</a>
    </div>
  </div>

  <!-- Confetti Canvas -->
  <canvas id="confetti-canvas" class="fixed top-0 left-0 pointer-events-none z-[3000]" aria-hidden="true"></canvas>

  <!-- Main Content -->
  <main class="md:ml-16 lg:ml-64 pt-16">
    <!-- Home Section -->
    <section id="home" class="section min-h-screen flex items-center justify-center hero-bg parallax active" style="background-image: url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?format=webp&quality=80')">
      <canvas id="particles-canvas" class="canvas-particles"></canvas>
      <div class="glassmorphic p-8 max-w-md mx-auto text-center">
        <img src="https://via.placeholder.com/150?text=Profile" alt="Profile Photo" class="w-32 h-32 rounded-full mx-auto mb-4 object-cover profile-img" loading="lazy">
        <h2 class="section-header text-3xl font-bold mb-4">Jogi Bala Venkata Aravind</h2>
        <p class="text-lg">I am a <span id="typed" class="font-semibold"></span></p>
        <p class="text-sm mt-2">Visitors Online: <span id="visitor-counter">1</span></p>
        <div class="flex justify-center space-x-4 mt-4">
          <a href="#contact" class="btn-primary">Contact Me</a>
          <a href="#" id="download-cv" class="btn-primary">Download CV</a>
        </div>
        <div class="flex justify-center space-x-4 mt-4">
          <a href="#" class="text-2xl hover:text-[var(--primary-color)] transition-transform hover:scale-110" aria-label="LinkedIn profile"><i class="fab fa-linkedin"></i></a>
          <a href="#" class="text-2xl hover:text-[var(--primary-color)] transition-transform hover:scale-110" aria-label="GitHub profile"><i class="fab fa-github"></i></a>
          <a href="#" class="text-2xl hover:text-[var(--primary-color)] transition-transform hover:scale-110" aria-label="Twitter profile"><i class="fab fa-twitter"></i></a>
        </div>
      </div>
    </section>

    <!-- About Section -->
    <section id="about" class="section py-16" data-gsap="slide-up">
      <h2 class="section-header text-4xl font-bold text-center mb-8">About Me</h2>
      <div class="glassmorphic p-8 max-w-3xl mx-auto">
        <p class="mb-2"><strong>Native Place:</strong> Hyderabad, Telangana</p>
        <p class="mb-2"><strong>Education:</strong> B.Tech in Computer Science</p>
        <p class="mb-2"><strong>Profession:</strong> Full-Stack Developer & IoT Enthusiast</p>
        <p><strong>Bio:</strong> I craft innovative web and IoT solutions, with expertise in quality assurance from my role at Guts Electro Mech, focusing on in-process quality and pre-delivery inspection.</p>
        <h3 class="section-header text-2xl font-semibold mt-6">Career Timeline</h3>
        <div class="timeline mt-4" id="timeline">
          <div class="timeline-item mb-4">
            <div class="timeline-dot"></div>
            <p class="font-semibold">2022: B.Tech Completion</p>
            <p>Graduated with a degree in Computer Science.</p>
          </div>
          <div class="timeline-item mb-4">
            <div class="timeline-dot"></div>
            <p class="font-semibold">2023: Quality Assurance at Guts Electro Mech</p>
            <p>Ensured product quality through rigorous testing.</p>
          </div>
          <div class="timeline-item">
            <div class="timeline-dot"></div>
            <p class="font-semibold">2025: Full-Stack Developer</p>
            <p>Building job portals and IoT systems.</p>
          </div>
        </div>
        <div class="mt-6">
          <h3 class="section-header text-2xl font-semibold">Current Weather in Hyderabad</h3>
          <p><strong>Temperature:</strong> <span id="weather-temp">28°C</span> <button id="toggle-unit" class="text-sm underline hover:text-[var(--primary-color)]" aria-label="Toggle temperature unit">Toggle °F</button></p>
          <p><strong>Condition:</strong> <span id="weather-condition">Sunny</span></p>
        </div>
      </div>
    </section>

    <!-- Skills Section -->
    <section id="skills" class="section py-16 bg-gray-100 dark:bg-gray-900" data-gsap="slide-up">
      <h2 class="section-header text-4xl font-bold text-center mb-8">Skills</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-5xl mx-auto">
        <div class="glassmorphic p-6 progress-container flip-card" data-skill="HTML & CSS">
          <div class="flip-card-inner">
            <div class="flip-card-front">
              <p class="font-semibold text-lg">HTML & CSS</p>
              <div class="circular-progress" data-percent="90">
                <svg width="80" height="80">
                  <circle class="bg" cx="40" cy="40" r="36"></circle>
                  <circle class="progress" cx="40" cy="40" r="36" stroke-dasharray="226.2" stroke-dashoffset="226.2"></circle>
                </svg>
                <div class="text">90%</div>
              </div>
              <div class="tooltip absolute text-xs p-2 rounded mt-2">Certified by Coursera</div>
            </div>
            <div class="flip-card-back">
              <p class="text-sm">Mastered responsive design and animations.</p>
            </div>
          </div>
          <div class="star-rating mt-4" data-skill="HTML & CSS" role="radiogroup" aria-label="Rate HTML & CSS">
            <i class="fas fa-star filled" role="radio" aria-checked="true" tabindex="0"></i>
            <i class="fas fa-star filled" role="radio" aria-checked="true" tabindex="-1"></i>
            <i class="fas fa-star filled" role="radio" aria-checked="true" tabindex="-1"></i>
            <i class="fas fa-star filled" role="radio" aria-checked="true" tabindex="-1"></i>
            <i class="fas fa-star" role="radio" aria-checked="false" tabindex="-1"></i>
          </div>
        </div>
        <!-- Other skill cards (similar structure) -->
      </div>
      <div class="glassmorphic p-6 max-w-md mx-auto mt-8">
        <h3 class="section-header text-2xl font-semibold">Skill Quiz</h3>
        <div id="quiz-progress" class="w-full h-2 bg-gray-200 rounded-full mt-2">
          <div id="quiz-progress-bar" class="h-full bg-[var(--primary-color)] rounded-full" style="width: 0%"></div>
        </div>
        <p id="quiz-question" class="mt-4"></p>
        <input id="quiz-answer" type="text" placeholder="Your Answer" class="w-full p-3 rounded-lg glassmorphic mt-2" aria-label="Quiz answer">
        <button id="quiz-submit" class="w-full btn-primary mt-3">Submit Answer</button>
        <button id="quiz-reset" class="w-full btn-primary mt-2 hidden">Reset Quiz</button>
        <p id="quiz-result" class="mt-2 hidden"></p>
      </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="section py-16 parallax" style="background-image: url('https://images.unsplash.com/photo-1516321310766-61b7c99e3f0a?format=webp&quality=80')" data-gsap="slide-up">
      <h2 class="section-header text-4xl font-bold text-center mb-8">Projects</h2>
      <div class="max-w-5xl mx-auto mb-6 flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
        <select id="project-filter" class="p-3 rounded-lg glassmorphic" aria-label="Filter projects by category">
          <option value="">All Categories</option>
          <option value="Web">Web</option>
          <option value="IoT">IoT</option>
        </select>
        <select id="project-sort" class="p-3 rounded-lg glassmorphic" aria-label="Sort projects">
          <option value="name-asc">Name (A-Z)</option>
          <option value="name-desc">Name (Z-A)</option>
          <option value="date-desc">Newest First</option>
          <option value="date-asc">Oldest First</option>
        </select>
      </div>
      <div class="swiper max-w-5xl mx-auto">
        <div class="swiper-wrapper" id="project-list">
          <div class="swiper-slide project-card flip-card" data-category="Web" data-name="Job Portal" data-date="2025-06-01" data-tech="React, Node.js, MongoDB" data-duration="3 months" data-link="https://example.com/job-portal">
            <div class="glassmorphic p-6 h-full flip-card-inner">
              <div class="flip-card-front">
                <h3 class="text-xl font-semibold">Job Portal</h3>
                <p class="mt-2">A responsive job search platform with advanced filtering.</p>
                <div class="mt-4">
                  <video src="https://via.placeholder.com/300x200.mp4?text=Job+Portal+Demo" controls class="w-full h-48 rounded-lg" aria-label="Job Portal Demo" loading="lazy"></video>
                </div>
                <div class="mt-4 flex space-x-2">
                  <a href="#" class="btn-primary flex-1 text-center" target="_blank" rel="noopener">View on GitHub</a>
                  <button onclick="Portfolio.openProjectModal(this.parentElement.parentElement.parentElement.parentElement)" class="btn-primary flex-1">Details</button>
                </div>
              </div>
              <div class="flip-card-back">
                <p class="text-sm">Built with React and Node.js for seamless job matching.</p>
              </div>
            </div>
          </div>
          <!-- Other project cards (similar structure) -->
        </div>
        <div class="swiper-button-prev" aria-label="Previous slide"></div>
        <div class="swiper-button-next" aria-label="Next slide"></div>
        <div class="swiper-pagination" role="tablist"></div>
      </div>
    </section>

    <!-- Other sections (condensed for brevity) -->
  </main>

  <!-- Toast Container -->
  <div id="toast-container" class="fixed top-4 left-1/2 -translate-x-1/2 z-[3000]" role="alert" aria-live="assertive"></div>

  <script>
    (function () {
      'use strict';

      const Portfolio = {
        // State
        state: {
          isDark: false,
          isHighContrast: false,
          visitors: parseInt(localStorage.getItem('visitors')) || 0,
          skillRatings: JSON.parse(localStorage.getItem('skill-ratings')) || {
            'HTML & CSS': [], 'JavaScript': [], 'React.js': [], 'Node.js': [], 'ESP32 & Arduino': [], 'Quality Assurance': [],
          },
          savedJobs: JSON.parse(localStorage.getItem('saved-jobs')) || [],
          appliedJobs: JSON.parse(localStorage.getItem('jobs-applied')) || [],
          messages: JSON.parse(localStorage.getItem('chat-messages')) || [],
          ideas: JSON.parse(localStorage.getItem('ideas')) || [],
          subscribers: JSON.parse(localStorage.getItem('subscribers')) || [],
          likes: JSON.parse(localStorage.getItem('likes')) || [0, 0, 0],
          comments: JSON.parse(localStorage.getItem('comments')) || ['Great post!', 'Insightful!', 'Very useful!'],
          quizStep: 0,
          messageCount: 0,
          ideasCount: 0,
          jobsApplied: 0,
          isCelsius: true,
          ledOn: false,
          iotData: { temp: [25], humidity: [60], labels: [new Date().toLocaleTimeString()] },
          currentImageIndex: 0,
          uploadedImages: [],
          particleAnimationFrame: null,
          iotChartInstance: null,
        },

        // Initialize
        init() {
          this.state.visitors++;
          localStorage.setItem('visitors', this.state.visitors);
          document.getElementById('visitor-counter').textContent = this.state.visitors;

          this.setupGSAP();
          this.setupSidebar();
          this.setupThemeToggle();
          this.setupAccessibility();
          this.setupVoiceControl();
          this.setupParticles();
          this.setupSwiper();
          this.setupHighlightJS();
          this.setupNavigation();
          this.setupProgressBars();
          this.setupTyped();
          this.setupWeather();
          this.setupContactForm();
          this.setupSkillQuiz();
          this.setupJobPortal();
          this.setupProjectFilter();
          this.setupGallery();
          this.setupAnalytics();
          this.setupChat();
          this.setupIoT();
          this.setupAchievements();
          this.setupIdeas();
          this.setupSocialFeed();
          this.setupNewsletter();
          this.setupPortfolioDownload();
          this.setupBackToTop();
          this.setupResourceCheck();
        },

        // GSAP and ScrollTrigger
        setupGSAP() {
          gsap.registerPlugin(ScrollTrigger);
          document.querySelectorAll('.section').forEach(section => {
            gsap.from(section, {
              opacity: 0,
              y: 50,
              duration: 0.6,
              ease: 'power2.out',
              scrollTrigger: {
                trigger: section,
                start: 'top 80%',
                toggleActions: 'play none none reverse',
                onEnter: () => section.classList.add('active'),
                onLeaveBack: () => section.classList.remove('active'),
              },
            });
          });
          gsap.utils.toArray('.timeline-item').forEach(item => {
            gsap.from(item, {
              opacity: 0,
              x: -20,
              duration: 0.5,
              scrollTrigger: {
                trigger: item,
                start: 'top 90%',
                onEnter: () => item.classList.add('visible'),
              },
            });
          });
        },

        // Sidebar
        setupSidebar() {
          const sidebar = document.getElementById('sidebar');
          const sidebarToggle = document.getElementById('sidebar-toggle');
          sidebarToggle.addEventListener('click', () => {
            sidebar.classList.toggle('open');
            sidebar.setAttribute('aria-expanded', sidebar.classList.contains('open'));
          });
        },

        // Theme Toggle
        setupThemeToggle() {
          const themeToggle = document.getElementById('theme-toggle');
          themeToggle.addEventListener('click', () => {
            this.state.isDark = !this.state.isDark;
            document.body.classList.toggle('dark', this.state.isDark);
            themeToggle.innerHTML = this.state.isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
            this.showToast('Theme toggled!');
          });
        },

        // Accessibility
        setupAccessibility() {
          const accessToggle = document.getElementById('access-toggle');
          accessToggle.addEventListener('click', () => {
            this.state.isHighContrast = !this.state.isHighContrast;
            document.body.classList.toggle('high-contrast', this.state.isHighContrast);
            accessToggle.innerHTML = this.state.isHighContrast ? '<i class="fas fa-eye-slash"></i>' : '<i class="fas fa-eye"></i>';
            this.showToast('High-contrast mode toggled!');
          });
        },

        // Voice Control
        setupVoiceControl() {
          const voiceControl = document.getElementById('voice-control');
          voiceControl.addEventListener('click', () => {
            if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {
              const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
              recognition.lang = 'en-US';
              recognition.start();
              recognition.onresult = (event) => {
                const command = event.results[0][0].transcript.toLowerCase();
                const sections = ['home', 'about', 'skills', 'projects', 'jobs', 'gallery', 'analytics', 'chat', 'iot', 'testimonials', 'codesnippets', 'achievements', 'social', 'ideas', 'blog', 'newsletter', 'contact'];
                const section = sections.find(s => command.includes(s));
                if (section) {
                  window.location.hash = section;
                  this.showToast(`Navigated to ${section}`);
                } else {
                  this.showToast('Command not recognized.', true);
                }
              };
              recognition.onerror = () => this.showToast('Voice recognition failed.', true);
            } else {
              this.showToast('Voice recognition not supported.', true);
            }
          });
        },

        // Particle Animation
        setupParticles() {
          const particlesCanvas = document.getElementById('particles-canvas');
          let particleWidth = window.innerWidth;
          let particleHeight = window.innerHeight;
          particlesCanvas.width = particleWidth;
          particlesCanvas.height = particleHeight;
          const ctx = particlesCanvas.getContext('2d');
          const particlesArray = [];
          const particleCount = Math.min(50, Math.floor(window.innerWidth / 20));
          for (let i = 0; i < particleCount; i++) {
            particlesArray.push({
              x: Math.random() * particleWidth,
              y: Math.random() * particleHeight,
              size: Math.random() * 3 + 1,
              speedX: Math.random() * 1 - 0.5,
              speedY: Math.random() * 1 - 0.5,
            });
          }
          const animateParticles = () => {
            if (document.getElementById('home').classList.contains('active')) {
              ctx.clearRect(0, 0, particleWidth, particleHeight);
              particlesArray.forEach(p => {
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
                ctx.fill();
                p.x += p.speedX;
                p.y += p.speedY;
                if (p.x < 0 || p.x > particleWidth) p.speedX *= -1;
                if (p.y < 0 || p.y > particleHeight) p.speedY *= -1;
              });
              this.state.particleAnimationFrame = requestAnimationFrame(animateParticles);
            }
          };
          if (window.matchMedia('(prefers-reduced-motion: no-preference)').matches) {
            animateParticles();
          }
          let resizeTimeout;
          window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
              particleWidth = window.innerWidth;
              particleHeight = window.innerHeight;
              particlesCanvas.width = particleWidth;
              particlesCanvas.height = particleHeight;
              particlesArray.forEach(p => {
                p.x = Math.min(p.x, particleWidth);
                p.y = Math.min(p.y, particleHeight);
              });
            }, 100);
          });
        },

        // Swiper
        setupSwiper() {
          new Swiper('.swiper', {
            slidesPerView: 1,
            spaceBetween: 20,
            navigation: {
              nextEl: '.swiper-button-next',
              prevEl: '.swiper-button-prev',
            },
            pagination: { el: '.swiper-pagination', clickable: true },
            breakpoints: {
              640: { slidesPerView: 2 },
              1024: { slidesPerView: 3 },
            },
            a11y: {
              enabled: true,
              prevSlideMessage: 'Previous slide',
              nextSlideMessage: 'Next slide',
              paginationBulletMessage: 'Go to slide {{index}}',
            },
          });
        },

        // Highlight.js
        setupHighlightJS() {
          hljs.highlightAll();
        },

        // Navigation
        setupNavigation() {
          const navLinks = document.querySelectorAll('.nav-link');
          navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
              e.preventDefault();
              const sectionId = link.getAttribute('data-section');
              document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
              navLinks.forEach(l => l.classList.remove('bg-white/10'));
              link.classList.add('bg-white/10');
              if (window.innerWidth < 768) document.getElementById('sidebar').classList.remove('open');
            });
            link.addEventListener('keypress', (e) => {
              if (e.key === 'Enter') link.click();
            });
          });
        },

        // Progress Bars
        setupProgressBars() {
          const progressBars = document.querySelectorAll('.circular-progress');
          const progressObserver = new IntersectionObserver((entries) => {
            entries.forEach((entry, index) => {
              if (entry.isIntersecting) {
                const percent = parseInt(entry.target.getAttribute('data-percent'));
                const circle = entry.target.querySelector('.progress');
                gsap.to(circle, {
                  strokeDashoffset: 226.2 - (226.2 * percent) / 100,
                  duration: 1.5,
                  ease: 'power2.out',
                  delay: index * 0.2,
                });
              }
            });
          }, { threshold: 0.5 });
          progressBars.forEach(bar => progressObserver.observe(bar));
        },

        // Typed.js
        setupTyped() {
          new Typed('#typed', {
            strings: ['Full-Stack Developer', 'IoT Enthusiast', 'Quality Analyst'],
            typeSpeed: 100,
            backSpeed: 50,
            loop: true,
            backDelay: 1000,
          });
        },

        // Weather
        setupWeather() {
          const toggleUnit = document.getElementById('toggle-unit');
          toggleUnit.addEventListener('click', () => {
            this.state.isCelsius = !this.state.isCelsius;
            const tempElement = document.getElementById('weather-temp');
            let temp = parseFloat(tempElement.textContent);
            temp = this.state.isCelsius ? (temp - 32) * 5/9 : temp * 9/5 + 32;
            tempElement.textContent = `${temp.toFixed(1)}${this.state.isCelsius ? '°C' : '°F'}`;
            toggleUnit.textContent = `Toggle ${this.state.isCelsius ? '°F' : '°C'}`;
            this.showToast(`Temperature unit changed to ${this.state.isCelsius ? 'Celsius' : 'Fahrenheit'}`);
          });
        },

        // Contact Form
        setupContactForm() {
          const contactForm = document.getElementById('contact-form');
          const captchaQuestion = document.getElementById('captcha-question');
          const captchaAnswer = document.getElementById('captcha-answer');
          const messagePreview = document.getElementById('message-preview');
          let captchaNum1 = Math.floor(Math.random() * 10) + 1;
          let captchaNum2 = Math.floor(Math.random() * 10) + 1;
          captchaQuestion.textContent = `What is ${captchaNum1} + ${captchaNum2}?`;
          document.getElementById('form-message').addEventListener('input', () => {
            const message = document.getElementById('form-message').value;
            messagePreview.innerHTML = message ? `<strong>Preview:</strong> ${this.sanitizeHTML(message).replace(/\n/g, '<br>')}` : '';
            messagePreview.classList.toggle('hidden', !message);
          });
          contactForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const answer = parseInt(captchaAnswer.value);
            if (answer === captchaNum1 + captchaNum2) {
              this.showToast('Message sent successfully!');
              contactForm.reset();
              messagePreview.classList.add('hidden');
              captchaNum1 = Math.floor(Math.random() * 10) + 1;
              captchaNum2 = Math.floor(Math.random() * 10) + 1;
              captchaQuestion.textContent = `What is ${captchaNum1} + ${captchaNum2}?`;
              captchaAnswer.value = '';
            } else {
              this.showToast('Incorrect CAPTCHA answer.', true);
            }
          });
        },

        // Toast Notifications
        showToast(message, isError = false) {
          const toast = document.createElement('div');
          toast.className = `toast glassmorphic p-4 rounded-lg ${isError ? 'bg-[var(--error-color)]' : 'bg-[var(--success-color)]'}`;
          toast.textContent = message;
          document.getElementById('toast-container').appendChild(toast);
          gsap.fromTo(toast, { opacity: 0, y: -20 }, { opacity: 1, y: 0, duration: 0.5 });
          setTimeout(() => {
            gsap.to(toast, { opacity: 0, y: -20, duration: 0.5, onComplete: () => toast.remove() });
          }, 3000);
        },

        // Sanitize HTML
        sanitizeHTML(str) {
          const div = document.createElement('div');
          div.textContent = str;
          return div.innerHTML;
        },

        // Copy to Clipboard
        copyToClipboard(text) {
          if (navigator.clipboard) {
            return navigator.clipboard.writeText(text).then(() => {
              this.showToast('Copied to clipboard!');
            }).catch(() => {
              this.showToast('Failed to copy.', true);
            });
          } else {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            try {
              document.execCommand('copy');
              this.showToast('Copied to clipboard!');
            } catch (err) {
              this.showToast('Failed to copy.', true);
            }
            document.body.removeChild(textarea);
          }
        },

        // Skill Quiz
        setupSkillQuiz() {
          const quizQuestion = document.getElementById('quiz-question');
          const quizAnswer = document.getElementById('quiz-answer');
          const quizSubmit = document.getElementById('quiz-submit');
          const quizReset = document.getElementById('quiz-reset');
          const quizResult = document.getElementById('quiz-result');
          const quizProgress = document.getElementById('quiz-progress-bar');
          const quizzes = [
            { question: 'What does HTML stand for?', answer: 'hypertext markup language' },
            { question: 'What is the main purpose of CSS?', answer: 'styling' },
            { question: 'What does API stand for?', answer: 'application programming interface' },
          ];
          quizQuestion.textContent = quizzes[this.state.quizStep].question;
          quizSubmit.addEventListener('click', () => {
            const answer = quizAnswer.value.toLowerCase().trim();
            if (answer === quizzes[this.state.quizStep].answer) {
              quizResult.textContent = 'Correct! Moving to next question...';
              quizResult.classList.remove('hidden', 'text-red-500');
              quizResult.classList.add('text-green-500');
              this.state.quizStep++;
              gsap.to(quizProgress, {
                width: `${(this.state.quizStep / quizzes.length) * 100}%`,
                duration: 0.5,
                ease: 'power2.out',
              });
              if (this.state.quizStep < quizzes.length) {
                quizQuestion.textContent = quizzes[this.state.quizStep].question;
                quizAnswer.value = '';
                this.triggerConfetti();
              } else {
                quizResult.textContent = 'Quiz completed! You are a Skill Quiz Master!';
                localStorage.setItem('quiz-completed', 'true');
                this.checkAchievements();
                this.triggerConfetti();
                quizSubmit.disabled = true;
                quizReset.classList.remove('hidden');
              }
            } else {
              quizResult.textContent = 'Incorrect. Try again!';
              quizResult.classList.remove('hidden', 'text-green-500');
              quizResult.classList.add('text-red-500');
            }
          });
          quizReset.addEventListener('click', () => {
            this.state.quizStep = 0;
            quizQuestion.textContent = quizzes[this.state.quizStep].question;
            quizAnswer.value = '';
            quizResult.classList.add('hidden');
            quizSubmit.disabled = false;
            quizReset.classList.add('hidden');
            gsap.to(quizProgress, { width: '0%', duration: 0.5, ease: 'power2.out' });
            this.showToast('Quiz reset!');
          });
        },

        // Confetti Effect
        triggerConfetti() {
          const canvas = document.getElementById('confetti-canvas');
          const ctx = canvas.getContext('2d');
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
          const particles = [];
          for (let i = 0; i < 50; i++) {
            particles.push({
              x: Math.random() * canvas.width,
              y: Math.random() * canvas.height,
              size: Math.random() * 5 + 2,
              speedX: Math.random() * 3 - 1.5,
              speedY: Math.random() * 3 - 1.5,
              color: `hsl(${Math.random() * 360}, 100%, 50%)`,
            });
          }
          const animateConfetti = () => {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => {
              ctx.beginPath();
              ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
              ctx.fillStyle = p.color;
              ctx.fill();
              p.x += p.speedX;
              p.y += p.speedY;
              p.size *= 0.98;
            });
            if (particles.some(p => p.size > 0.1)) {
              requestAnimationFrame(animateConfetti);
            } else {
              ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
          };
          if (window.matchMedia('(prefers-reduced-motion: no-preference)').matches) {
            animateConfetti();
          }
        },

        // Job Portal
        setupJobPortal() {
          const jobFilter = document.getElementById('job-filter');
          const jobCategory = document.getElementById('job-category');
          const jobCards = document.querySelectorAll('.job-card');
          const filterJobs = () => {
            const filter = jobFilter.value.toLowerCase();
            const category = jobCategory.value;
            jobCards.forEach(card => {
              const title = card.querySelector('h3').textContent.toLowerCase();
              const cardCategory = card.getAttribute('data-category');
              const matches = (filter === '' || title.includes(filter)) && (category === '' || cardCategory === category);
              card.classList.toggle('hidden', !matches);
            });
          };
          jobFilter.addEventListener('input', filterJobs);
          jobCategory.addEventListener('change', filterJobs);

          window.applyJob = (title) => {
            if (!this.state.appliedJobs.includes(title)) {
              this.state.appliedJobs.push(title);
              localStorage.setItem('jobs-applied', JSON.stringify(this.state.appliedJobs));
              document.getElementById(`status-${title}`).textContent = 'Applied';
              this.showToast(`Applied for ${title}!`);
              this.checkAchievements();
            } else {
              this.showToast('Already applied for this job.', true);
            }
          };

          window.saveJob = (title) => {
            if (!this.state.savedJobs.includes(title)) {
              this.state.savedJobs.push(title);
              localStorage.setItem('saved-jobs', JSON.stringify(this.state.savedJobs));
              this.renderSavedJobs();
              this.showToast(`Saved ${title}!`);
            } else {
              this.showToast('Job already saved.', true);
            }
          };

          window.removeSavedJob = (title) => {
            this.state.savedJobs = this.state.savedJobs.filter(job => job !== title);
            localStorage.setItem('saved-jobs', JSON.stringify(this.state.savedJobs));
            this.renderSavedJobs();
            this.showToast(`Removed ${title} from saved jobs.`);
          };

          this.renderSavedJobs();
        },

        renderSavedJobs() {
          const savedJobsList = document.getElementById('saved-jobs');
          savedJobsList.innerHTML = '';
          this.state.savedJobs.forEach(job => {
            const li = document.createElement('li');
            li.className = 'glassmorphic p-2 rounded';
            li.innerHTML = `${this.sanitizeHTML(job)} <button class="text-red-400 hover:text-red-600 ml-2" onclick="Portfolio.removeSavedJob('${job}')" aria-label="Remove saved job">Remove</button>`;
            savedJobsList.appendChild(li);
          });
        },

        // Project Filter
        setupProjectFilter() {
          const projectFilter = document.getElementById('project-filter');
          const projectSort = document.getElementById('project-sort');
          const projectCards = document.querySelectorAll('.project-card');
          const projectList = document.getElementById('project-list');
          const swiper = document.querySelector('.swiper').swiper;

          const filterAndSortProjects = () => {
            const filter = projectFilter.value;
            const sort = projectSort.value;
            const projects = Array.from(projectCards);
            projects.forEach(card => {
              const category = card.getAttribute('data-category');
              card.classList.toggle('hidden', filter && category !== filter);
            });
            const visibleProjects = projects.filter(card => !card.classList.contains('hidden'));
            visibleProjects.sort((a, b) => {
              const nameA = a.getAttribute('data-name');
              const nameB = b.getAttribute('data-name');
              const dateA = new Date(a.getAttribute('data-date'));
              const dateB = new Date(a.getAttribute('data-date'));
              if (sort === 'name-asc') return nameA.localeCompare(nameB);
              if (sort === 'name-desc') return nameB.localeCompare(nameA);
              if (sort === 'date-asc') return dateA - dateB;
              return dateB - dateA;
            });
            projectList.innerHTML = '';
            visibleProjects.forEach(card => projectList.appendChild(card));
            swiper.update();
          };

          projectFilter.addEventListener('change', filterAndSortProjects);
          projectSort.addEventListener('change', filterAndSortProjects);
        },

        // Project Modal
        openProjectModal(card) {
          const title = card.getAttribute('data-name');
          const description = card.querySelector('p').textContent;
          const tech = card.getAttribute('data-tech');
          const duration = card.getAttribute('data-duration');
          const link = card.getAttribute('data-link');
          document.getElementById('modal-title').textContent = title;
          document.getElementById('modal-description').textContent = description;
          document.getElementById('modal-tech').innerHTML = `<strong>Tech Stack:</strong> ${this.sanitizeHTML(tech)}`;
          document.getElementById('modal-duration').innerHTML = `<strong>Duration:</strong> ${this.sanitizeHTML(duration)}`;
          document.getElementById('modal-link').href = link;
          const modal = document.getElementById('project-modal');
          modal.setAttribute('aria-hidden', 'false');
          modal.classList.add('active');
          modal.querySelector('button').focus();
          const closeHandler = (e) => {
            if (e.key === 'Escape') this.closeProjectModal();
          };
          document.addEventListener('keydown', closeHandler);
          modal.closeHandler = closeHandler;
        },

        closeProjectModal() {
          const modal = document.getElementById('project-modal');
          modal.classList.remove('active');
          setTimeout(() => {
            modal.setAttribute('aria-hidden', 'true');
            document.removeEventListener('keydown', modal.closeHandler);
          }, 300);
        },

        // Gallery
        setupGallery() {
          let galleryImages = document.querySelectorAll('#gallery-grid img');
          const photoUpload = document.getElementById('photo-upload');
          const photoPreview = document.getElementById('photo-preview');
          const addToGalleryBtn = document.getElementById('add-to-gallery');
          const imageFilter = document.getElementById('image-filter');

          window.openLightbox = (src, alt, index) => {
            this.state.currentImageIndex = index;
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const lightboxCaption = document.getElementById('lightbox-caption');
            lightboxImg.src = src;
            lightboxCaption.textContent = alt;
            lightbox.setAttribute('aria-hidden', 'false');
            lightbox.classList.add('active');
            lightbox.querySelector('button').focus();
            document.addEventListener('keydown', this.handleLightboxKeys.bind(this));
          };

          window.closeLightbox = () => {
            const lightbox = document.getElementById('lightbox');
            lightbox.classList.remove('active');
            setTimeout(() => {
              lightbox.setAttribute('aria-hidden', 'true');
              document.removeEventListener('keydown', this.handleLightboxKeys.bind(this));
            }, 300);
          };

          window.prevImage = () => {
            this.state.currentImageIndex = (this.state.currentImageIndex - 1 + galleryImages.length) % galleryImages.length;
            const img = galleryImages[this.state.currentImageIndex];
            document.getElementById('lightbox-img').src = img.src;
            document.getElementById('lightbox-caption').textContent = img.alt;
            gsap.from('#lightbox-img', { scale: 0.8, opacity: 0, duration: 0.3 });
          };

          window.nextImage = () => {
            this.state.currentImageIndex = (this.state.currentImageIndex + 1) % galleryImages.length;
            const img = galleryImages[this.state.currentImageIndex];
            document.getElementById('lightbox-img').src = img.src;
            document.getElementById('lightbox-caption').textContent = img.alt;
            gsap.from('#lightbox-img', { scale: 0.8, opacity: 0, duration: 0.3 });
          };

          window.downloadImage = () => {
            const img = document.getElementById('lightbox-img');
            const link = document.createElement('a');
            link.href = img.src;
            link.download = img.alt;
            link.click();
            this.showToast('Image downloaded!');
          };

          window.shareImage = () => {
            const img = document.getElementById('lightbox-img');
            if (navigator.share) {
              navigator.share({
                title: img.alt,
                url: img.src,
              }).then(() => this.showToast('Image shared!'));
            } else {
              this.copyToClipboard(img.src);
              this.showToast('Image URL copied to clipboard!');
            }
          };

          photoUpload.addEventListener('change', () => {
            this.state.uploadedImages = Array.from(photoUpload.files).filter(file => file.type.startsWith('image/'));
            photoPreview.innerHTML = '';
            photoPreview.classList.remove('hidden');
            addToGalleryBtn.classList.remove('hidden');
            this.state.uploadedImages.forEach((file, index) => {
              const img = document.createElement('img');
              img.src = URL.createObjectURL(file);
              img.className = `w-24 h-24 object-cover rounded-lg ${imageFilter.value} transition-transform hover:scale-105`;
              img.alt = `Uploaded Image ${index + 1}`;
              photoPreview.appendChild(img);
            });
          });

          imageFilter.addEventListener('change', () => {
            photoPreview.querySelectorAll('img').forEach(img => {
              img.className = `w-24 h-24 object-cover rounded-lg ${imageFilter.value} transition-transform hover:scale-105`;
            });
          });

          window.addToGallery = () => {
            this.state.uploadedImages.forEach((file, index) => {
              const img = document.createElement('img');
              img.src = URL.createObjectURL(file);
              img.alt = `Uploaded Image ${galleryImages.length + index + 1}`;
              img.className = `rounded-lg object-cover w-full h-48 glassmorphic cursor-pointer transition-transform hover:scale-105 ${imageFilter.value}`;
              img.onclick = () => window.openLightbox(img.src, img.alt, galleryImages.length + index);
              document.getElementById('gallery-grid').appendChild(img);
            });
            galleryImages = document.querySelectorAll('#gallery-grid img');
            photoPreview.classList.add('hidden');
            addToGalleryBtn.classList.add('hidden');
            photoUpload.value = '';
            this.state.uploadedImages = [];
            this.showToast('Images added to gallery!');
          };
        },

        handleLightboxKeys(e) {
          if (e.key === 'Escape') window.closeLightbox();
          if (e.key === 'ArrowLeft') window.prevImage();
          if (e.key === 'ArrowRight') window.nextImage();
        },

        // Analytics
        setupAnalytics() {
          const analyticsLogin = document.getElementById('analytics-login');
          const analyticsContent = document.getElementById('analytics-content');
          const devLoginBtn = document.getElementById('dev-login-btn');
          const devUsername = document.getElementById('dev-username');
          const devPassword = document.getElementById('dev-password');

          devLoginBtn.addEventListener('click', () => {
            if (this.validateCredentials(devUsername.value, devPassword.value)) {
              analyticsLogin.classList.add('hidden');
              analyticsContent.classList.remove('hidden');
              this.showToast('Analytics access granted!');
              this.renderAnalyticsChart();
              this.renderSkillRatings();
            } else {
              this.showToast('Invalid credentials.', true);
            }
          });

                   // Analytics Chart
          this.renderAnalyticsChart();
        },

        validateCredentials(username, password) {
          // Mock authentication (replace with secure server-side validation in production)
          return username === 'Tinju' && password === 'Tinju@2001';
        },

        renderAnalyticsChart() {
          try {
            const ctx = document.getElementById('analytics-chart').getContext('2d');
            if (this.state.analyticsChartInstance) {
              this.state.analyticsChartInstance.destroy();
            }
            this.state.analyticsChartInstance = new Chart(ctx, {
              type: 'bar',
              data: {
                labels: ['Projects', 'Skills', 'Jobs Applied', 'Messages'],
                datasets: [{
                  label: 'Portfolio Metrics',
                  data: [5, 6, this.state.jobsApplied, this.state.messageCount],
                  backgroundColor: ['var(--primary-color)', 'var(--secondary-color)', 'var(--accent-color)', 'var(--success-color)'],
                  borderRadius: 8,
                }],
              },
              options: {
                responsive: true,
                plugins: {
                  legend: { display: false },
                  tooltip: { enabled: true },
                },
                scales: {
                  y: { beginAtZero: true, title: { display: true, text: 'Count' } },
                  x: { title: { display: true, text: 'Metrics' } },
                },
              },
            });
          } catch (error) {
            console.error('Error rendering analytics chart:', error);
            this.showToast('Failed to render analytics chart.', true);
          }
        },

        renderSkillRatings() {
          const ratingsContainer = document.getElementById('skill-ratings');
          ratingsContainer.innerHTML = '';
          Object.entries(this.state.skillRatings).forEach(([skill, ratings]) => {
            const avg = ratings.length ? (ratings.reduce((sum, r) => sum + r, 0) / ratings.length).toFixed(1) : 0;
            const div = document.createElement('div');
            div.className = 'glassmorphic p-4 mb-4';
            div.innerHTML = `<p><strong>${this.sanitizeHTML(skill)}</strong>: ${avg}/5 (${ratings.length} ratings)</p>`;
            ratingsContainer.appendChild(div);
          });
        },

        // Chat System
        setupChat() {
          const chatMessages = document.getElementById('chat-messages');
          const chatInput = document.getElementById('chat-input');
          const chatSubmit = document.getElementById('chat-submit');
          const pinMessageBtn = document.getElementById('pin-message');
          const searchMessages = document.getElementById('search-messages');

          const renderMessages = () => {
            chatMessages.innerHTML = '';
            const searchTerm = searchMessages.value.toLowerCase();
            this.state.messages
              .filter(msg => msg.text.toLowerCase().includes(searchTerm))
              .forEach((msg, index) => {
                const div = document.createElement('div');
                div.className = `chat-message ${msg.sender === 'user' ? 'sent' : 'received'} ${msg.pinned ? 'pinned' : ''}`;
                div.innerHTML = `${this.sanitizeHTML(msg.text)} <small>${new Date(msg.timestamp).toLocaleTimeString()}</small>`;
                div.setAttribute('data-index', index);
                chatMessages.appendChild(div);
              });
            chatMessages.scrollTop = chatMessages.scrollHeight;
          };

          chatSubmit.addEventListener('click', () => {
            const text = chatInput.value.trim();
            if (text) {
              this.state.messages.push({ text, sender: 'user', timestamp: new Date(), pinned: false });
              this.state.messageCount++;
              localStorage.setItem('chat-messages', JSON.stringify(this.state.messages));
              chatInput.value = '';
              renderMessages();
              // Simulate bot response
              setTimeout(() => {
                this.state.messages.push({ text: `Bot: Thanks for your message: "${text}"`, sender: 'bot', timestamp: new Date(), pinned: false });
                localStorage.setItem('chat-messages', JSON.stringify(this.state.messages));
                renderMessages();
                this.showToast('New message received!');
              }, 1000);
            }
          });

          chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') chatSubmit.click();
          });

          pinMessageBtn.addEventListener('click', () => {
            const selected = chatMessages.querySelector('.chat-message:hover');
            if (selected) {
              const index = parseInt(selected.getAttribute('data-index'));
              this.state.messages[index].pinned = !this.state.messages[index].pinned;
              localStorage.setItem('chat-messages', JSON.stringify(this.state.messages));
              renderMessages();
              this.showToast(this.state.messages[index].pinned ? 'Message pinned!' : 'Message unpinned!');
            } else {
              this.showToast('Please hover over a message to pin/unpin.', true);
            }
          });

          searchMessages.addEventListener('input', renderMessages);
          renderMessages();
        },

        // IoT Control
        setupIoT() {
          const toggleLed = document.getElementById('toggle-led');
          const iotChart = document.getElementById('iot-chart').getContext('2d');

          toggleLed.addEventListener('click', () => {
            this.state.ledOn = !this.state.ledOn;
            toggleLed.textContent = this.state.ledOn ? 'Turn Off LED' : 'Turn On LED';
            this.showToast(`LED ${this.state.ledOn ? 'On' : 'Off'}`);
            // Simulate IoT data update
            this.state.iotData.temp.push(this.state.ledOn ? 28 : 25);
            this.state.iotData.humidity.push(this.state.ledOn ? 65 : 60);
            this.state.iotData.labels.push(new Date().toLocaleTimeString());
            if (this.state.iotData.temp.length > 10) {
              this.state.iotData.temp.shift();
              this.state.iotData.humidity.shift();
              this.state.iotData.labels.shift();
            }
            this.renderIoTChart();
          });

          this.renderIoTChart();
        },

        renderIoTChart() {
          try {
            if (this.state.iotChartInstance) {
              this.state.iotChartInstance.destroy();
            }
            this.state.iotChartInstance = new Chart(document.getElementById('iot-chart').getContext('2d'), {
              type: 'line',
              data: {
                labels: this.state.iotData.labels,
                datasets: [
                  {
                    label: 'Temperature (°C)',
                    data: this.state.iotData.temp,
                    borderColor: 'var(--primary-color)',
                    fill: false,
                    tension: 0.4,
                  },
                  {
                    label: 'Humidity (%)',
                    data: this.state.iotData.humidity,
                    borderColor: 'var(--secondary-color)',
                    fill: false,
                    tension: 0.4,
                  },
                ],
              },
              options: {
                responsive: true,
                plugins: { legend: { position: 'top' } },
                scales: {
                  x: { title: { display: true, text: 'Time' } },
                  y: { beginAtZero: false, title: { display: true, text: 'Value' } },
                },
              },
            });
          } catch (error) {
            console.error('Error rendering IoT chart:', error);
            this.showToast('Failed to render IoT chart.', true);
          }
        },

        // Achievements
        setupAchievements() {
          const devLoginBtn = document.getElementById('achievements-login-btn');
          const achievementsContent = document.getElementById('achievements-content');
          const devUsername = document.getElementById('achievements-username');
          const devPassword = document.getElementById('achievements-password');

          devLoginBtn.addEventListener('click', () => {
            if (this.validateCredentials(devUsername.value, devPassword.value)) {
              document.getElementById('achievements-login').classList.add('hidden');
              achievementsContent.classList.remove('hidden');
              this.showToast('Achievements unlocked!');
              this.renderAchievements();
            } else {
              this.showToast('Invalid credentials.', true);
            }
          });

          this.checkAchievements();
        },

        checkAchievements() {
          const achievementsList = document.getElementById('achievements-list');
          const achievements = [
            { name: 'Quiz Master', condition: () => localStorage.getItem('quiz-completed') === 'true', reward: 'Certificate' },
            { name: 'Job Seeker', condition: () => this.state.appliedJobs.length >= 3, reward: 'Badge' },
            { name: 'Chat Enthusiast', condition: () => this.state.messageCount >= 5, reward: 'Sticker' },
            { name: 'Idea Generator', condition: () => this.state.ideasCount >= 3, reward: 'Trophy' },
          ];

          achievementsList.innerHTML = '';
          achievements.forEach(ach => {
            const li = document.createElement('li');
            li.className = `glassmorphic p-4 mb-4 ${ach.condition() ? '' : 'opacity-50'}`;
            li.innerHTML = `<strong>${this.sanitizeHTML(ach.name)}</strong>: ${ach.condition() ? ach.reward : 'Locked'}`;
            achievementsList.appendChild(li);
          });
        },

        // Ideas
        setupIdeas() {
          const ideaInput = document.getElementById('idea-input');
          const ideaSubmit = document.getElementById('idea-submit');
          const ideaList = document.getElementById('idea-list');
          const ideaSearch = document.getElementById('idea-search');

          const renderIdeas = () => {
            ideaList.innerHTML = '';
            const searchTerm = ideaSearch.value.toLowerCase();
            this.state.ideas
              .filter(idea => idea.text.toLowerCase().includes(searchTerm))
              .forEach((idea, index) => {
                const li = document.createElement('li');
                li.className = 'glassmorphic p-4 mb-4';
                li.innerHTML = `${this.sanitizeHTML(idea.text)} <small>${new Date(idea.timestamp).toLocaleString()}</small>
                  <button class="text-red-400 hover:text-red-600 ml-2" onclick="Portfolio.deleteIdea(${index})" aria-label="Delete idea">Delete</button>`;
                ideaList.appendChild(li);
              });
          };

          ideaSubmit.addEventListener('click', () => {
            const text = ideaInput.value.trim();
            if (text) {
              this.state.ideas.push({ text, timestamp: new Date() });
              this.state.ideasCount++;
              localStorage.setItem('ideas', JSON.stringify(this.state.ideas));
              ideaInput.value = '';
              renderIdeas();
              this.checkAchievements();
              this.showToast('Idea added!');
            }
          });

          ideaSearch.addEventListener('input', renderIdeas);
          renderIdeas();
        },

        deleteIdea(index) {
          this.state.ideas.splice(index, 1);
          localStorage.setItem('ideas', JSON.stringify(this.state.ideas));
          this.setupIdeas();
          this.showToast('Idea deleted!');
        },

        // Social Feed
        setupSocialFeed() {
          const likeButtons = document.querySelectorAll('.like-btn');
          const commentInputs = document.querySelectorAll('.comment-input');
          const commentLists = document.querySelectorAll('.comment-list');

          likeButtons.forEach((btn, index) => {
            btn.addEventListener('click', () => {
              this.state.likes[index]++;
              localStorage.setItem('likes', JSON.stringify(this.state.likes));
              btn.querySelector('span').textContent = this.state.likes[index];
              this.showToast('Post liked!');
            });
          });

          commentInputs.forEach((input, index) => {
            input.addEventListener('keypress', (e) => {
              if (e.key === 'Enter' && input.value.trim()) {
                this.state.comments[index].push(this.sanitizeHTML(input.value));
                localStorage.setItem('comments', JSON.stringify(this.state.comments));
                this.renderComments();
                input.value = '';
                this.showToast('Comment added!');
              }
            });
          });

          this.renderComments();
        },

        renderComments() {
          const commentLists = document.querySelectorAll('.comment-list');
          commentLists.forEach((list, index) => {
            list.innerHTML = '';
            this.state.comments[index].forEach(comment => {
              const li = document.createElement('li');
              li.className = 'glassmorphic p-2 mb-2';
              li.textContent = comment;
              list.appendChild(li);
            });
          });
        },

        // Newsletter
        setupNewsletter() {
          const newsletterForm = document.getElementById('newsletter-form');
          const emailInput = document.getElementById('email-input');

          newsletterForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = emailInput.value.trim();
            if (email && !this.state.subscribers.includes(email)) {
              this.state.subscribers.push(email);
              localStorage.setItem('subscribers', JSON.stringify(this.state.subscribers));
              emailInput.value = '';
              this.showToast('Subscribed to newsletter!');
            } else {
              this.showToast('Email already subscribed or invalid.', true);
            }
          });
        },

        // Portfolio Download
        setupPortfolioDownload() {
          const downloadCv = document.getElementById('download-cv');
          downloadCv.addEventListener('click', (e) => {
            e.preventDefault();
            this.downloadPortfolio();
          });
        },

        downloadPortfolio() {
          try {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.setFontSize(20);
            doc.text('Jogi Bala Venkata Aravind - Portfolio', 20, 20);
            doc.setFontSize(12);
            doc.text('Full-Stack Developer & IoT Enthusiast', 20, 30);
            doc.text('Native Place: Hyderabad, Telangana', 20, 40);
            doc.text('Education: B.Tech in Computer Science', 20, 50);
            doc.text('Email: example@email.com', 20, 60);
            doc.text('Projects:', 20, 80);
            document.querySelectorAll('.project-card').forEach((card, index) => {
              const name = card.getAttribute('data-name');
              const tech = card.getAttribute('data-tech');
              doc.text(`${index + 1}. ${name} (${tech})`, 30, 90 + index * 10);
            });
            doc.save('Aravind_Portfolio.pdf');
            this.showToast('Portfolio downloaded!');
          } catch (error) {
            console.error('Error generating PDF:', error);
            this.showToast('Failed to download portfolio.', true);
          }
        },

        // Back to Top
        setupBackToTop() {
          const backToTop = document.getElementById('back-to-top');
          window.addEventListener('scroll', () => {
            backToTop.classList.toggle('hidden', window.scrollY < 300);
          });
          backToTop.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
          });
        },

        // Resource Check
        setupResourceCheck() {
          const checkResources = () => {
            const resources = [
              window.gsap,
              window.ScrollTrigger,
              window.Chart,
              window.jspdf,
              window.Swiper,
              window.hljs,
              window.Typed,
            ];
            if (resources.every(r => r)) {
              document.getElementById('loading').classList.add('hidden');
              document.getElementById('loading').setAttribute('aria-hidden', 'true');
              clearInterval(resourceCheckInterval);
            }
          };
          const resourceCheckInterval = setInterval(checkResources, 100);
          setTimeout(() => {
            if (!document.getElementById('loading').classList.contains('hidden')) {
              this.showToast('Some resources failed to load.', true);
              document.getElementById('loading').classList.add('hidden');
              document.getElementById('loading').setAttribute('aria-hidden', 'true');
              clearInterval(resourceCheckInterval);
            }
          }, 5000);
        },
      };

      // Initialize Portfolio
      document.addEventListener('DOMContentLoaded', () => Portfolio.init());
    })();
  </script>
</body>
</html>
